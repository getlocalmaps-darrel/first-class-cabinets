---
// src/components/ProductSchema.astro
// Generates Product schema on every page â€” triggers Google star rich results
// Included in MainLayout.astro so every page inherits it automatically

interface Props {
  includeReviews?: Array<{
    name: string;
    date: string;
    rating: number;
    text: string;
  }>;
}

const { includeReviews } = Astro.props;

const schema: Record<string, any> = {
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "First Class WoodWorks",
  "description": "Master cabinet maker and custom cabinet builder in Murrieta, CA. 100% in-house luxury cabinetry, kitchen remodeling, bathroom vanities, and finish carpentry.",
  "image": "https://www.firstclasswoodworks.com/assets/logo.png",
  "url": "https://www.firstclasswoodworks.com/",
  "itemCondition": "https://schema.org/NewCondition",
  "brand": {
    "@type": "Brand",
    "name": "First Class WoodWorks"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "itemReviewed": {
      "@type": "Thing",
      "name": "First Class WoodWorks"
    },
    "ratingValue": "4.9",
    "ratingCount": "30",
    "bestRating": "5",
    "worstRating": "1"
  },
  "offers": {
    "@type": "Offer",
    "url": "https://www.firstclasswoodworks.com/contact",
    "price": "0",
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock",
    "description": "Free in-home estimate"
  }
};

if (includeReviews && includeReviews.length > 0) {
  schema.review = includeReviews.map(r => ({
    "@type": "Review",
    "author": { "@type": "Person", "name": r.name },
    "datePublished": r.date,
    "reviewRating": { "@type": "Rating", "ratingValue": String(r.rating), "bestRating": "5" },
    "reviewBody": r.text
  }));
}
---

<script type="application/ld+json" set:html={JSON.stringify(schema)} />
