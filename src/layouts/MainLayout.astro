---
// src/layouts/MainLayout.astro
const { title, description } = Astro.props;
import { Image } from 'astro:assets';
import '../styles/global.css';
import logoImage from '../assets/logo.png';
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" content={description} />
    <title>{title} | First Class Woodworks</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  </head>
  <body class="bg-white text-neutral-800 font-body">
    
    <nav id="navbar" class="absolute top-0 w-full z-50 transition-all duration-300">
        
        <div id="nav-container" class="relative max-w-7xl mx-auto px-4 sm:px-6 py-4 flex items-center">
            
            <a href="/" id="nav-logo" class="block z-50 relative transition-opacity duration-300">
                <Image 
                    src={logoImage} 
                    alt="First Class Woodworks" 
                    class="h-14 w-auto md:h-32 object-contain" 
                />
            </a>
            
            <div class="hidden md:flex absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 gap-8 items-center">
                <a href="/" class="nav-link">HOME</a>
                <a href="/services" class="nav-link">SERVICES</a>
                <a href="/gallery" class="nav-link">GALLERY</a>
                <a href="/contact" class="nav-link">CONTACT</a>
            </div>

            <div class="hidden md:flex items-center gap-4 relative z-50 ml-auto">
                <a href="tel:9519731265" class="text-white font-bold hover:text-yellow-500 transition">
                    951-973-1265
                </a>
                <a href="/contact" class="bg-yellow-600 text-white px-6 py-2 rounded-sm font-bold text-sm uppercase tracking-wider hover:bg-yellow-700 transition">
                    Get Quote
                </a>
            </div>

            <div class="flex md:hidden items-center gap-3 relative z-50 ml-auto">
                <a href="sms:9519731265" class="bg-zinc-900 text-white p-2 rounded-full border border-zinc-700 hover:bg-black">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.017-7.03.05-1.584.233-2.707 1.626-2.707 3.228V16.741z" />
                    </svg>
                </a>
                <a href="tel:9519731265" class="bg-zinc-900 text-white p-2 rounded-full border border-zinc-700 hover:bg-black">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
                    </svg>
                </a>
                <a href="sms:9519731265?&body=Hi, I would like a quote for cabinets..." class="bg-yellow-600 text-white px-3 py-2 rounded-sm font-bold text-xs uppercase tracking-wider">
                    Quote
                </a>
            </div>
        </div>
        
        <div id="nav-gradient" class="absolute top-0 w-full h-full bg-gradient-to-b from-black/80 to-transparent -z-10 transition-opacity duration-300"></div>
    </nav>

    <main>
      <slot /> 
    </main>

    <footer class="bg-black text-white py-16 mt-20 text-center border-t border-zinc-800">
        <h2 class="font-serif text-2xl mb-2">First Class Woodworks</h2>
        <p class="text-gray-400 text-sm">Â© {new Date().getFullYear()} Serving Murrieta & Temecula Valley</p>
    </footer>

    <script>
        const navbar = document.getElementById('navbar');
        const navContainer = document.getElementById('nav-container');
        const navGradient = document.getElementById('nav-gradient');
        const navLogo = document.getElementById('nav-logo');

        window.addEventListener('scroll', () => {
            // TRIGGER: 700px (Wait until completely past hero)
            if (window.scrollY > 700) {
                
                // --- STATE: THIN BLACK STICKY BAR ---
                navbar.classList.remove('absolute');
                navbar.classList.add('fixed', 'bg-black', 'shadow-xl', 'animate-fadeIn'); // Sticks to top
                
                // Make it thin
                navContainer.classList.remove('py-4');
                navContainer.classList.add('py-2');

                // Hide things
                navGradient.classList.add('hidden'); 
                navLogo.classList.add('hidden'); // Removes logo completely

            } else {
                
                // --- STATE: TRANSPARENT TOP HEADER ---
                navbar.classList.add('absolute'); // Scrolls away with page
                navbar.classList.remove('fixed', 'bg-black', 'shadow-xl', 'animate-fadeIn');
                
                // Make it tall
                navContainer.classList.add('py-4');
                navContainer.classList.remove('py-2');

                // Show things
                navGradient.classList.remove('hidden'); 
                navLogo.classList.remove('hidden');
            }
        });
    </script>

  </body>
</html>

<style is:global>
  :root {
    --font-serif: 'Playfair Display', serif;
    --font-body: 'Lato', sans-serif;
  }
  h1, h2, h3, h4, h5 { font-family: var(--font-serif); }
  body { font-family: var(--font-body); }

  .nav-link {
    color: white;
    font-weight: 700;
    font-size: 0.875rem;
    letter-spacing: 0.05em;
    transition: color 0.3s;
  }
  .nav-link:hover {
    color: #EAB308; 
  }

  /* Smooth fade in for the black bar */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }
</style>